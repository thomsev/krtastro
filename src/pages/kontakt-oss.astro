---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Hero from '@/components/Hero.astro';
import RichText from '@/components/RichText.astro';
import ContactForm from '@/components/ContactForm.tsx';
import { getPage, getSiteSettings } from '@/lib/content';

const page = await getPage('kontakt-oss');
const site = await getSiteSettings();
const mapLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(site.address)}`;
---
<BaseLayout title={page?.title} description={page?.description}>
  <Hero title={page?.hero?.title ?? 'Kontakt oss'} subtitle={page?.hero?.subtitle} />
  <section class="section">
    <div class="container">
      <div class="contact-layout">
        <div class="card contact-info" data-animate="fade-up">
          <h2>Kontaktinformasjon</h2>
          <p>Fortell oss om behovet ditt, så får du raskt en ryddig tilbakemelding.</p>
          <RichText content={page?.body ?? ''} />
          <div class="contact-details">
            <p>
              <strong>Adresse:</strong> <a href={mapLink} target="_blank" rel="noreferrer">{site.address}</a>
            </p>
            <p>
              <strong>Telefon:</strong> <a href={`tel:+47${site.phone.replace(/\s/g, '')}`}>{site.phone}</a>
            </p>
            <p>
              <strong>E-post:</strong> <a href={`mailto:${site.email}`}>{site.email}</a>
            </p>
          </div>
        </div>
        <div class="card contact-form" data-animate="fade-up">
          <h2>Send en forespørsel</h2>
          <p>Vi svarer i løpet av arbeidsdagen.</p>
          <ContactForm client:load />
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
