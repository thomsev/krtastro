---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Hero from '@/components/Hero.astro';
import RichText from '@/components/RichText.astro';
import ContactForm from '@/components/ContactForm.tsx';
import { getPage, getSiteSettings } from '@/lib/content';

const page = await getPage('kontakt-oss');
const site = await getSiteSettings();
const mapLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(site.address)}`;
---
<BaseLayout title={page?.title} description={page?.description}>
  <Hero title={page?.hero?.title ?? 'Kontakt oss'} subtitle={page?.hero?.subtitle} />
  <section class="section">
    <div class="container">
      <div class="grid cols-3">
        <div class="card" data-animate="fade-up">
          <h2>Kontaktinformasjon</h2>
          <RichText content={page?.body ?? ''} />
          <p>
            <strong>Adresse:</strong> <a href={mapLink} target="_blank" rel="noreferrer">{site.address}</a>
          </p>
          <p>
            <strong>Telefon:</strong> <a href={`tel:+47${site.phone.replace(/\s/g, '')}`}>{site.phone}</a>
          </p>
          <p>
            <strong>E-post:</strong> <a href={`mailto:${site.email}`}>{site.email}</a>
          </p>
        </div>
        <div class="card" data-animate="fade-up">
          <h2>Beskriv behovet ditt</h2>
          <p>Vi tar kontakt så snart som mulig. Ingen forpliktelser.</p>
          <p>Trenger du raske avklaringer? Bruk skjemaet, så svarer vi i løpet av arbeidsdagen.</p>
        </div>
        <div class="card" data-animate="fade-up">
          <ContactForm client:load />
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
